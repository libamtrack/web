<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <link rel="shortcut icon" href="static/img/favicon.ico">
    <title>LibamtrackWeb</title>
</head>
<script type="text/javascript">
    let loadScript = function (src, callbackfn) {
        let newScript = document.createElement("script");
        newScript.type = "text/javascript";
        newScript.setAttribute("async", "true");
        newScript.setAttribute("src", src);

        if (newScript.readyState) {
            newScript.onreadystatechange = function () {
                if (/loaded|complete/.test(newScript.readyState)) callbackfn();
            }
        } else {
            newScript.addEventListener("load", callbackfn, false);
        }

        document.documentElement.firstChild.appendChild(newScript);
    };

    function detectBrowserSupport() {
        let notSupportedMsg = "You browser is not supported";
        let libatPath = 'static/js/libat.js';
        let libatWithoutWasmPath = 'static/js/libatwithoutwasm.js';
        if(navigator.userAgent.indexOf('MSIE')!==-1 || navigator.appVersion.indexOf('Trident/') > -1){
            /* Microsoft Internet Explorer*/
            let ua = navigator.appVersion;
            if (ua.indexOf("Trident/7.0") > -1)
                loadScript(libatWithoutWasmPath, null); //IE 11 WORKS
            else
                window.alert(notSupportedMsg);  // IE < 11 FOR SURE NOT COMPATIBLE (JS version)
        } else if(navigator.userAgent.indexOf('Chrom') !== -1){
            /* Chrome or Chromium*/
            let chromeVersion = parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2], 10);
            if(chromeVersion >= 57)
                loadScript(libatPath, null);
            else if (chromeVersion >= 41)
                loadScript(libatWithoutWasmPath, null);
            else
                window.alert(notSupportedMsg);
        } else {
            /* NOT Microsoft Internet Explorer or Chrome*/
            loadScript(libatPath, null);
        }
    }
</script>
<body onload="detectBrowserSupport()">
<script id="js" src="" ></script>
<div id="index"></div>
</body>
</html>
